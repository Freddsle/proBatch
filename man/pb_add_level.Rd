% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ProBatchFeatures.R
\name{pb_add_level}
\alias{pb_add_level}
\title{Add a new level from an external matrix and link to an existing assay}
\usage{
pb_add_level(
  object,
  from,
  new_matrix,
  to_level,
  to_pipeline = NULL,
  name = NULL,
  mapping_df = NULL,
  from_id = NULL,
  to_id = NULL,
  map_strategy = c("as_is", "first", "longest"),
  link_var = "ProteinID",
  backend = c("auto", "memory", "hdf5"),
  hdf5_path = NULL
)
}
\arguments{
\item{new_matrix}{numeric matrix (features x samples)}

\item{to_level}{e.g. "protein"}

\item{to_pipeline}{optional pipeline name (default carries over from 'from')}

\item{name}{optional final assay name override}

\item{mapping_df}{data.frame with mapping from 'from' IDs to 'to' IDs}

\item{from_id}{column in mapping_df for 'from' IDs (e.g., "Precursor.Id")}

\item{to_id}{column in mapping_df for 'to' IDs (e.g., "Protein.Ids")}

\item{map_strategy}{how to resolve multiple to-ids per from-id:
"as_is" (error if not 1:1), "first" (take first), "longest" (take longest string)}

\item{link_var}{rowData variable name to use for linking (e.g., "ProteinID")}

\item{backend}{"memory","hdf5","auto"}

\item{hdf5_path}{optional filepath for HDF5Array}
}
\value{
ProBatchFeatures with new assay and link added
}
\description{
Add a new level from an external matrix and link to an existing assay
}
